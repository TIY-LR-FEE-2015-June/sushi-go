{"version":3,"sources":["js/template-setup.js","templates/game-over.js","templates/game.js","templates/start.js","js/card.js","js/deck.js","js/hand.js","js/player.js","js/game.js","js/app.js"],"sourcesContent":["AppTemplates = {};\n\nHandlebars.registerHelper('slug', function(str) {\n  return str.toLowerCase().replace(' ', '-');\n});\n","AppTemplates['game-over'] = Handlebars.template({\"1\":function(depth0,helpers,partials,data) {\n    return \"<h1>You Win!</h1>\\n\";\n},\"3\":function(depth0,helpers,partials,data) {\n    return \"<h1>You Lose!</h1>\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.playerWins : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.program(3, data, 0),\"data\":data})) != null ? stack1 : \"\");\n},\"useData\":true});","AppTemplates['game'] = Handlebars.template({\"1\":function(depth0,helpers,partials,data,blockParams) {\n    var stack1;\n\n  return ((stack1 = helpers['if'].call(depth0,((stack1 = blockParams[0][0]) != null ? stack1.computerPlayer : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(2, data, 0, blockParams),\"inverse\":this.program(4, data, 0, blockParams),\"data\":data,\"blockParams\":blockParams})) != null ? stack1 : \"\")\n    + ((stack1 = helpers.each.call(depth0,((stack1 = blockParams[0][0]) != null ? stack1.cards : stack1),{\"name\":\"each\",\"hash\":{},\"fn\":this.program(6, data, 1, blockParams),\"inverse\":this.noop,\"data\":data,\"blockParams\":blockParams})) != null ? stack1 : \"\")\n    + \"    </div>\\n\";\n},\"2\":function(depth0,helpers,partials,data) {\n    return \"    <div class=\\\"computer\\\">\\n\";\n},\"4\":function(depth0,helpers,partials,data) {\n    return \"    <div class=\\\"player\\\">\\n\";\n},\"6\":function(depth0,helpers,partials,data,blockParams) {\n    var stack1, helper, alias1=helpers.helperMissing, alias2=this.escapeExpression;\n\n  return \"        <div class=\\\"card \"\n    + alias2((helpers.slug || (depth0 && depth0.slug) || alias1).call(depth0,((stack1 = blockParams[0][0]) != null ? stack1.type : stack1),{\"name\":\"slug\",\"hash\":{},\"data\":data,\"blockParams\":blockParams}))\n    + \"\\\" data-index=\\\"\"\n    + alias2(((helper = (helper = helpers.index || (data && data.index)) != null ? helper : alias1),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"index\",\"hash\":{},\"data\":data,\"blockParams\":blockParams}) : helper)))\n    + \"\\\">\\n            \"\n    + alias2(this.lambda(((stack1 = blockParams[0][0]) != null ? stack1.name : stack1), depth0))\n    + \"\\n        </div>\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data,blockParams) {\n    var stack1;\n\n  return ((stack1 = helpers.each.call(depth0,(depth0 != null ? depth0.players : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":this.program(1, data, 1, blockParams),\"inverse\":this.noop,\"data\":data,\"blockParams\":blockParams})) != null ? stack1 : \"\");\n},\"useData\":true,\"useBlockParams\":true});","AppTemplates['start'] = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    return \"<h1>Select Number of Players</h1>\\n\\n<button class=\\\"choose-character\\\">2</button>\\n<button class=\\\"choose-character\\\">3</button>\\n<button class=\\\"choose-character\\\">4</button>\\n\";\n},\"useData\":true});","function Card(name, type, aiScore) {\n  this.name = name;\n  this.type = type;\n  this.aiScore = aiScore;\n}\n","/**\n * Constructor for a Deck of Card objects\n * @param {Game} game - The current game to tell when game over\n */\nfunction Deck(game) {\n  this.game = game;\n  this.cards = [];\n}\n\nDeck.prototype.setupInfo = [\n  {\n    number: 14,\n    name: 'Tempura',\n    type: 'tempura',\n    aiScore: 1\n  },\n  {\n    number: 14,\n    name: 'Sashimi',\n    type: 'sashimi',\n    aiScore: 1\n  },\n  {\n    number: 14,\n    name: 'Dumpling',\n    type: 'dumpling',\n    aiScore: 1\n  },\n  {\n    number: 12,\n    name: '2 Maki Rolls',\n    type: 'maki-rolls',\n    aiScore: 1\n  },\n  {\n    number: 8,\n    name: '3 Maki Rolls',\n    type: 'maki-rolls',\n    aiScore: 1\n  },\n  {\n    number: 6,\n    name: '1 Maki Rolls',\n    type: 'maki-rolls',\n    aiScore: 1\n  },\n  {\n    number: 10,\n    name: 'Salmon Nigiri',\n    type: 'nigiri',\n    aiScore: 1\n  },\n  {\n    number: 5,\n    name: 'Squid Nigiri',\n    type: 'nigiri',\n    aiScore: 1\n  },\n  {\n    number: 5,\n    name: 'Egg Nigiri',\n    type: 'nigiri',\n    aiScore: 1\n  },\n  {\n    number: 10,\n    name: 'Pudding',\n    type: 'pudding',\n    aiScore: 1\n  },\n  {\n    number: 6,\n    name: 'Wasabi',\n    type: 'wasabi',\n    aiScore: 1\n  }\n];\n\nDeck.prototype.setup = function() {\n  // Take every card in setupInfo and add it to this.cards\n  this.cards = _(this.setupInfo).reduce(function(cards, cardInfo) {\n    for (var i = cardInfo.number - 1; i >= 0; i--) {\n      cards.push(new Card(cardInfo.name, cardInfo.type, cardInfo.aiScore));\n    }\n\n    return cards;\n  }, []);\n\n  // Shuffle Deck\n  this.cards = _(this.cards).shuffle();\n};\n\nDeck.prototype.deal = function(amount) {\n  var hand = [];\n\n  for (var i = 0; i < amount; i++) {\n    var drawnCard = this.cards.pop();\n\n    if (drawnCard) {\n      hand.push(drawnCard);\n    } else if (this.game) {\n      this.game.trigger('gameOver', 'Out of cards');\n    }\n  }\n\n  return hand;\n};\n","function Hand() {\n  this.cards = [];\n}\n\nHand.prototype = {\n  constructor: Hand,\n\n  addCards: function(cards) {\n    this.cards = this.cards.concat(cards);\n  },\n\n  resetCards: function() {\n    this.cards = [];\n  }\n};\n","function Player(computerPlayer) {\n  Hand.apply(this);\n  this.computerPlayer = computerPlayer || false;\n}\n\nPlayer.prototype = _.extend({\n  constructor: Player\n}, Hand.prototype);\n","function Game() {\n  this.players = [];\n  this.turnNumber = 0;\n  this.gameOver = false;\n  this.deck = new Deck(this);\n\n  this.deck.setup();\n  this.players.push(new Player(), new Player(true));\n\n  this.on('start:round', function() {\n    this.turnNumber++;\n    console.info('Starting turn', this.turnNumber);\n\n    this.dealRound();\n  });\n}\n\nGame.prototype = _.extend({\n  constructor: Game,\n\n  cardsPerPlayer: [\n    {players: 2, cards: 10}\n  ],\n\n  dealRound: function() {\n    var cardsToDeal = _.findWhere(this.cardsPerPlayer, {players: this.players.length}).cards;\n    var deck = this.deck;\n\n    this.players.forEach(function(player) {\n      player.addCards(deck.deal(cardsToDeal));\n    });\n\n    this.trigger('change');\n  },\n\n  currentPlayer: function() {\n    return this.players.findWhere({computerPlayer: false});\n  }\n}, Backbone.Events);\n","$('#game-board').html(AppTemplates.start());\n\n$('#game-board').on('click', '.choose-character', function() {\n  var game = new Game();\n\n  $('#game-board').on('click', '.player .card', function() {\n    var index = $(this).data('index');\n\n    game.trigger('submit:card', index);\n  });\n\n  game.on('change', function() {\n    if (game.gameOver) {\n      $('#game-board').html(AppTemplates['game-over'](game));\n    } else {\n      $('#game-board').html(AppTemplates.game(game));\n    }\n  });\n\n  game.trigger('start:round');\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvBA;AACA;;ACDA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;","file":"app.js"}